<!--

     Licensed to the Apache Software Foundation (ASF) under one
     or more contributor license agreements.  See the NOTICE file
     distributed with this work for additional information
     regarding copyright ownership.  The ASF licenses this file
     to you under the Apache License, Version 2.0 (the
     "License"); you may not use this file except in compliance
     with the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

     Unless required by applicable law or agreed to in writing,
     software distributed under the License is distributed on an
     "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
     KIND, either express or implied.  See the License for the
     specific language governing permissions and limitations
     under the License.

-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- **************************************************************** -->
<!-- *  PLEASE KEEP COMPLICATED EXPRESSIONS OUT OF THESE TEMPLATES, * -->
<!-- *  i.e. only iterate & print data where possible. Thanks, Jez. * -->
<!-- **************************************************************** -->

<html>
<head>
    <!-- Generated by groovydoc -->
    <title>AsyncBatchSupport (6.1.6)</title>
    
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link href="../../../groovy.ico" type="image/x-icon" rel="shortcut icon">
    <link href="../../../groovy.ico" type="image/x-icon" rel="icon">
    <link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">

<body class="center">
<script type="text/javascript"><!--
if (location.href.indexOf('is-external=true') == -1) {
    parent.document.title="AsyncBatchSupport (6.1.6)";
}
//-->
</script>
<noscript>
    <div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
    <!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
    <!--   -->
</a>
    <ul class="navList" title="Navigation">
        <li><a href="../../../overview-summary.html">Overview</a></li>
        <li><a href="package-summary.html">Package</a></li>
        <li class="navBarCell1Rev">Class</li>
        <li><a href="../../../deprecated-list.html">Deprecated</a></li>
        <li><a href="../../../index-all.html">Index</a></li>
        <li><a href="../../../help-doc.html">Help</a></li>
    </ul>
</div>

<div class="subNav">
    <div>
        <ul class="navList">
            <li><a href="../../../index.html?gorm/tools/async/AsyncBatchSupport" target="_top">Frames</a></li>
            <li><a href="AsyncBatchSupport.html" target="_top">No Frames</a></li>
        </ul>
    </div>
    <div>
        <ul class="subNavList">
            <li>Summary:&nbsp;</li>
            Nested&nbsp;&nbsp;&nbsp;Field&nbsp;&nbsp;&nbsp;<li><a href="#property_summary">Property</a></li>&nbsp;&nbsp;&nbsp;<li><a href="#method_summary">Method</a></li>&nbsp;&nbsp;&nbsp;
        </ul>
        <ul class="subNavList">
            <li>&nbsp;|&nbsp;Detail:&nbsp;</li>
            Field&nbsp;&nbsp;&nbsp;<li><a href="#prop_detail">Property</a></li>&nbsp;&nbsp;&nbsp;<li><a href="#method_detail">Method</a></li>&nbsp;&nbsp;&nbsp;
        </ul>
    </div>
    <a name="skip-navbar_top">
        <!--   -->
    </a></div>
<!-- ========= END OF TOP NAVBAR ========= -->

<!-- ======== START OF CLASS DATA ======== -->
<div class="header">

    <div class="subTitle">Package: <strong>gorm.tools.async</strong></div>

    <h2 title="[Groovy] Trait AsyncBatchSupport" class="title">[Groovy] Trait AsyncBatchSupport</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><ul class="inheritance"></ul></li><li>gorm.tools.async.AsyncBatchSupport
</ul>
<div class="description">
    <ul class="blockList">
        <li class="blockList">

            <dl>
                <dt>All Implemented Interfaces and Traits:</dt>
                <dd><a href='../../../gorm/tools/WithTrx.html'>WithTrx</a></dd>
            </dl>
            <!-- todo: direct known subclasses -->
            <hr>
            <br>
<pre>@<a href='http://groovy.codehaus.org/api/groovy/transform/CompileStatic.html' title='CompileStatic'>CompileStatic</a>
trait AsyncBatchSupport

</pre>



    <p> a trait to be used for colating/slicing a list into "batches" to then asynchronously with Transactions
 insert or update for maximum performance.
 <DL><DT><B>See Also:</B></DT><DD><a href='../../../gorm/tools/async/GparsBatchSupport.html' title=' GparsBatchSupport - for a concrete implementation'> GparsBatchSupport - for a concrete implementation</a></DD></DL><DL><DT><B>Authors:</B></DT><DD>Joshua Burnett</DD></DL><DL><DT><B>Since:</B></DT><DD>6.1</DD></DL></p>

          </li>
    </ul>
</div>

<div class="summary">
    <ul class="blockList">
        <li class="blockList">
        <!-- =========== NESTED CLASS SUMMARY =========== -->
        

        <!-- =========== ENUM CONSTANT SUMMARY =========== -->
        
        <!-- =========== FIELD SUMMARY =========== -->
        

        <!-- =========== PROPERTY SUMMARY =========== -->
        
         <ul class="blockList">
                <li class="blockList"><a name="property_summary"><!--   --></a>
                    <h3>Properties Summary</h3>
                    <ul class="blockList">
                    <table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Properties Summary table, listing nested classes, and an explanation">
                        <caption><span>Properties</span><span class="tabEnd">&nbsp;</span></caption>
                        <tr>
                            <th class="colFirst" scope="col">Type</th>
                            <th class="colLast" scope="col">Name and description</th>
                        </tr>
                        
                        <tr class="altColor">
                            <td class="colFirst"><code><strong>int</strong></code>&nbsp;</td>
                            <td class="colLast"><code><a href="#batchSize">batchSize</a></code><br>The list size to send to the collate that slices.</td>
                        </tr>
                        
                    </table>
                   </ul>
                </li>
            </ul>
        

        <!-- =========== ELEMENT SUMMARY =========== -->
        

        

        
        <!-- ========== METHOD SUMMARY =========== -->
        <ul class="blockList">
            
            <li class="blockList"><a name="method_summary"><!--   --></a>
                    <h3>Methods Summary</h3>
                    <ul class="blockList">
                    <table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Methods Summary table">
                        <caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
                        <tr>
                            <th class="colFirst" scope="col">Type Params</th>
                            <th class="colLast" scope="col">Return Type</th>
                            <th class="colLast" scope="col">Name and description</th>
                        </tr>
                        
                        <tr class="altColor">
                            <td class="colFirst"><code></code></td>
                            <td class="colLast"><code>void</code></td>
                            <td class="colLast"><code><strong><a href="#batchTrx(java.util.Map, java.util.List, groovy.lang.Closure)">batchTrx</a></strong>(<a href='http://download.oracle.com/javase/8/docs/api/java/util/Map.html' title='Map'>Map</a> args, <a href='http://download.oracle.com/javase/8/docs/api/java/util/List.html' title='List'>List</a> items, <a href='http://groovy.codehaus.org/api/groovy/lang/Closure.html' title='Closure'>Closure</a> itemClosure)</code><br>runs {@link #doBatch ) in a Transaction and flush and clear is called after doBatch but before commit.</td>
                        </tr>
                        
                        <tr class="rowColor">
                            <td class="colFirst"><code></code></td>
                            <td class="colLast"><code><a href='http://download.oracle.com/javase/8/docs/api/java/util/List.html' title='List'>List</a>&lt;<a href='http://download.oracle.com/javase/8/docs/api/java/util/List.html' title='List'>List</a>&gt;</code></td>
                            <td class="colLast"><code><strong><a href="#collate(java.util.List, java.lang.Integer)">collate</a></strong>(<a href='http://download.oracle.com/javase/8/docs/api/java/util/List.html' title='List'>List</a> items, <a href='http://download.oracle.com/javase/8/docs/api/java/lang/Integer.html' title='Integer'>Integer</a> batchSize = null)</code><br>Uses collate to break or slice the list into sub-lists of batches. </td>
                        </tr>
                        
                        <tr class="altColor">
                            <td class="colFirst"><code></code></td>
                            <td class="colLast"><code>void</code></td>
                            <td class="colLast"><code><strong><a href="#doBatch(java.util.Map, java.util.List, groovy.lang.Closure)">doBatch</a></strong>(<a href='http://download.oracle.com/javase/8/docs/api/java/util/Map.html' title='Map'>Map</a> args, <a href='http://download.oracle.com/javase/8/docs/api/java/util/List.html' title='List'>List</a> items, <a href='http://groovy.codehaus.org/api/groovy/lang/Closure.html' title='Closure'>Closure</a> itemClosure)</code><br>calls closure for each item in list. flush and clear is called after all items are done
 and just before commit.</td>
                        </tr>
                        
                        <tr class="rowColor">
                            <td class="colFirst"><code></code></td>
                            <td class="colLast"><code>void</code></td>
                            <td class="colLast"><code><strong><a href="#parallel(java.util.Map, List<List>, groovy.lang.Closure)">parallel</a></strong>(<a href='http://download.oracle.com/javase/8/docs/api/java/util/Map.html' title='Map'>Map</a> args = [:], <a href='http://download.oracle.com/javase/8/docs/api/java/util/List.html' title='List'>List</a>&lt;<a href='http://download.oracle.com/javase/8/docs/api/java/util/List.html' title='List'>List</a>&gt; batches, <a href='http://groovy.codehaus.org/api/groovy/lang/Closure.html' title='Closure'>Closure</a> batchClosure)</code><br>Iterates over the batchList of lists and calls the closure passing in the list and the args asynchronously.
 </td>
                        </tr>
                        
                        <tr class="altColor">
                            <td class="colFirst"><code></code></td>
                            <td class="colLast"><code>void</code></td>
                            <td class="colLast"><code><strong><a href="#parallelBatch(java.util.Map, List<List>, groovy.lang.Closure)">parallelBatch</a></strong>(<a href='http://download.oracle.com/javase/8/docs/api/java/util/Map.html' title='Map'>Map</a> args = [:], <a href='http://download.oracle.com/javase/8/docs/api/java/util/List.html' title='List'>List</a>&lt;<a href='http://download.oracle.com/javase/8/docs/api/java/util/List.html' title='List'>List</a>&gt; batches, <a href='http://groovy.codehaus.org/api/groovy/lang/Closure.html' title='Closure'>Closure</a> itemClosure)</code><br>calls <a href='#parallel()'>parallel()</a> and passes args, batchList and the closure through to <a href='#batchTrx()'>batchTrx()</a></td>
                        </tr>
                        
                        <tr class="rowColor">
                            <td class="colFirst"><code></code></td>
                            <td class="colLast"><code>void</code></td>
                            <td class="colLast"><code><strong><a href="#parallelCollate(java.util.Map, java.util.List, groovy.lang.Closure)">parallelCollate</a></strong>(<a href='http://download.oracle.com/javase/8/docs/api/java/util/Map.html' title='Map'>Map</a> args = [:], <a href='http://download.oracle.com/javase/8/docs/api/java/util/List.html' title='List'>List</a> list, <a href='http://groovy.codehaus.org/api/groovy/lang/Closure.html' title='Closure'>Closure</a> itemClosure)</code><br>Uses collate to break or slice the list into batches and then calls parallelBatch</td>
                        </tr>
                        
                    </table>
                   </ul>
              </li>
            
        </ul>
        
    </li>
    </ul>
</div>

<div class="details">
    <ul class="blockList">
        <li class="blockList">
           

            

            
            <!-- =========== PROPERTY DETAIL =========== -->
            <ul class="blockList">
                <li class="blockList"><a name="prop_detail">
                    <!--   -->
                </a>
                    <h3>Property Detail</h3>
                    
                        <a name="batchSize"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>@<a href='https://docs.spring.io/spring/docs/4.2.x/javadoc-api/org/springframework/beans/factory/annotation/Value.html' title='Value'>Value</a>('${hibernate.jdbc.batch_size:0}')
int <strong>batchSize</strong></h4>
                                <p> The list size to send to the collate that slices.</p>
                            </li>
                        </ul>
                    
                </li>
            </ul>
            

            

            


            
            <!-- =========== METHOD DETAIL =========== -->
            <ul class="blockList">
                <li class="blockList"><a name="method_detail">
                    <!--   -->
                </a>
                    <h3>Method Detail</h3>
                    
                        <a name="batchTrx(java.util.Map, java.util.List, groovy.lang.Closure)"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>void <strong>batchTrx</strong>(<a href='http://download.oracle.com/javase/8/docs/api/java/util/Map.html' title='Map'>Map</a> args, <a href='http://download.oracle.com/javase/8/docs/api/java/util/List.html' title='List'>List</a> items, <a href='http://groovy.codehaus.org/api/groovy/lang/Closure.html' title='Closure'>Closure</a> itemClosure)</h4>
                                <p> runs {<DL><DT><B>link:</B></DT><DD><a href='#doBatch'>) in a Transaction and flush and clear is called after doBatch but before commit.</a></DD></DL>
     </p>
                            </li>
                        </ul>
                    
                        <a name="collate(java.util.List, java.lang.Integer)"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4><a href='http://download.oracle.com/javase/8/docs/api/java/util/List.html' title='List'>List</a>&lt;<a href='http://download.oracle.com/javase/8/docs/api/java/util/List.html' title='List'>List</a>&gt; <strong>collate</strong>(<a href='http://download.oracle.com/javase/8/docs/api/java/util/List.html' title='List'>List</a> items, <a href='http://download.oracle.com/javase/8/docs/api/java/lang/Integer.html' title='Integer'>Integer</a> batchSize = null)</h4>
                                <p> Uses collate to break or slice the list into sub-lists of batches. Uses the <a href='#batchSize'>batchSize</a> unless listSize is sent in
     <DL><DT><B>Parameters:</B></DT><DD><code>items</code> -  the list to slice up into batches</DD><DD><code>batchSize</code> -  _optional_ the length of each batch sub-list in the returned list. override the <a href='#batchSize'>batchSize</a></DD></DL><DL><DT><B>Returns:</B></DT><DD>the batches (list of lists) containing the chunked list of items</DD></DL></p>
                            </li>
                        </ul>
                    
                        <a name="doBatch(java.util.Map, java.util.List, groovy.lang.Closure)"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>void <strong>doBatch</strong>(<a href='http://download.oracle.com/javase/8/docs/api/java/util/Map.html' title='Map'>Map</a> args, <a href='http://download.oracle.com/javase/8/docs/api/java/util/List.html' title='List'>List</a> items, <a href='http://groovy.codehaus.org/api/groovy/lang/Closure.html' title='Closure'>Closure</a> itemClosure)</h4>
                                <p> calls closure for each item in list. flush and clear is called after all items are done
 and just before commit.
     <DL><DT><B>Parameters:</B></DT><DD><code>args</code> -  <i>optional args to pass to the closure. coming from parallelClosure</DD><DD><code>items</code> -  the list or items to iterate over and run the closure</DD><DD><code>itemClosure</code> -  the closure to execute for each item. will get passed the item and args as it itereates over the list</DD></DL></p>
                            </li>
                        </ul>
                    
                        <a name="parallel(java.util.Map, List<List>, groovy.lang.Closure)"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>void <strong>parallel</strong>(<a href='http://download.oracle.com/javase/8/docs/api/java/util/Map.html' title='Map'>Map</a> args = [:], <a href='http://download.oracle.com/javase/8/docs/api/java/util/List.html' title='List'>List</a>&lt;<a href='http://download.oracle.com/javase/8/docs/api/java/util/List.html' title='List'>List</a>&gt; batches, <a href='http://groovy.codehaus.org/api/groovy/lang/Closure.html' title='Closure'>Closure</a> batchClosure)</h4>
                                <p> Iterates over the batchList of lists and calls the closure passing in the list and the args asynchronously.
 parallelClosure it self is not asynchronous and will return once all the items in the batchList are processed.
 If you want this method itself to be run asynchronous then it can be done in a Promise as outlined in the Grails async docs

 Must be overriden by the concrete implementation as this is where the meat is.
     <DL><DT><B>Parameters:</B></DT><DD><code>args</code> -  _optional_ arg map to be passed to the async engine such as gpars.
     can also add any other value and they will be passed down through the closure as well <br>
     - poolSize : gets passed down into the GParsPool.withPool for example</DD><DD><code>batches</code> -  a collated list of lists. each batch list in the batches will be asynchronously passed to the provided closure</DD><DD><code>batchClosure</code> -  the closure to call for each batch(sub-list of items) in the batches(list of batch sub-lists)</DD></DL></p>
                            </li>
                        </ul>
                    
                        <a name="parallelBatch(java.util.Map, List<List>, groovy.lang.Closure)"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>void <strong>parallelBatch</strong>(<a href='http://download.oracle.com/javase/8/docs/api/java/util/Map.html' title='Map'>Map</a> args = [:], <a href='http://download.oracle.com/javase/8/docs/api/java/util/List.html' title='List'>List</a>&lt;<a href='http://download.oracle.com/javase/8/docs/api/java/util/List.html' title='List'>List</a>&gt; batches, <a href='http://groovy.codehaus.org/api/groovy/lang/Closure.html' title='Closure'>Closure</a> itemClosure)</h4>
                                <p> calls <a href='#parallel()'>parallel()</a> and passes args, batchList and the closure through to <a href='#batchTrx()'>batchTrx()</a> </p>
                            </li>
                        </ul>
                    
                        <a name="parallelCollate(java.util.Map, java.util.List, groovy.lang.Closure)"><!-- --></a>
                        <ul class="blockListLast">
                            <li class="blockList">
                                <h4>void <strong>parallelCollate</strong>(<a href='http://download.oracle.com/javase/8/docs/api/java/util/Map.html' title='Map'>Map</a> args = [:], <a href='http://download.oracle.com/javase/8/docs/api/java/util/List.html' title='List'>List</a> list, <a href='http://groovy.codehaus.org/api/groovy/lang/Closure.html' title='Closure'>Closure</a> itemClosure)</h4>
                                <p> Uses collate to break or slice the list into batches and then calls parallelBatch
     <DL><DT><B>Parameters:</B></DT><DD><code>args</code> -  optional arg map to be passed on through to eachParallel and the async engine such as gpars. <br>
     - batchSize : parameter to be passed into collate</DD><DD><code>list</code> -  the list to process that will get sliced into batches via collate</DD><DD><code>itemClosure</code> -  the closure to pass to eachParallel which is then passed to withTransaction</DD></DL></p>
                            </li>
                        </ul>
                    
                </li>
            </ul>
            
        </li>
    </ul>
</div>

<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
    <!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
    <!--   -->
</a>
    <ul class="navList" title="Navigation">
        <li><a href="../../../overview-summary.html">Overview</a></li>
        <li><a href="package-summary.html">Package</a></li>
        <li class="navBarCell1Rev">Class</li>
        <li><a href="../../../deprecated-list.html">Deprecated</a></li>
        <li><a href="../../../index-all.html">Index</a></li>
        <li><a href="../../../help-doc.html">Help</a></li>
    </ul>
</div>

<div class="subNav">
    <div>
        <ul class="navList">
            <li><a href="../../../index.html?gorm/tools/async/AsyncBatchSupport" target="_top">Frames</a></li>
            <li><a href="AsyncBatchSupport.html" target="_top">No Frames</a></li>
        </ul>
    </div>
    <div>
        <ul class="subNavList">
            <li>Summary:&nbsp;</li>
            Nested&nbsp;&nbsp;&nbsp;Field&nbsp;&nbsp;&nbsp;<li><a href="#property_summary">Property</a></li>&nbsp;&nbsp;&nbsp;<li><a href="#method_summary">Method</a></li>&nbsp;&nbsp;&nbsp;
        </ul>
        <ul class="subNavList">
            <li>&nbsp;|&nbsp;Detail:&nbsp;</li>
            Field&nbsp;&nbsp;&nbsp;<li><a href="#prop_detail">Property</a></li>&nbsp;&nbsp;&nbsp;<li><a href="#method_detail">Method</a></li>&nbsp;&nbsp;&nbsp;
        </ul>
    </div>
    <p>Groovy Documentation</p>
    <a name="skip-navbar_bottom">
        <!--   -->
    </a>
    </div>
</div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
